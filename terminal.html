<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SilverX Pro | Command Center</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root { --primary: #2563eb; --bg-dark: #0f172a; --bg-card: #1e293b; --text-main: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; color: #1e293b; transition: background 0.3s; overflow-x: hidden; }
        body.dark-mode { background-color: var(--bg-dark); color: var(--text-main); }
        .glass-morphism { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        body.dark-mode .glass-morphism { background: rgba(30, 41, 59, 0.9); border-bottom: 1px solid rgba(255,255,255,0.05); }
        
        #sidebar { position: fixed; top: 0; left: -100%; width: 280px; height: 100vh; background: #ffffff; z-index: 50; transition: 0.3s ease; box-shadow: 10px 0 40px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        body.dark-mode #sidebar { background: var(--bg-card); }
        #sidebar.active { left: 0; }
        .nav-item { padding: 15px 20px; margin: 5px 10px; border-radius: 12px; cursor: pointer; display: flex; items-center; gap: 12px; font-weight: 600; font-size: 14px; transition: 0.2s; }
        .nav-item:hover { background: rgba(37, 99, 235, 0.1); color: var(--primary); }

        .dashboard-card { border-radius: 20px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); background: white; transition: 0.3s; position: relative; overflow: hidden; }
        body.dark-mode .dashboard-card { background: var(--bg-card); box-shadow: none; }
        .stats-header { background: linear-gradient(135deg, #0f172a 0%, #334155 100%); color: white; }
        
        .pair-card { border: 1px solid #e2e8f0; border-radius: 16px; padding: 16px; display: flex; flex-direction: column; gap: 10px; background: white; transition: 0.2s; }
        body.dark-mode .pair-card { background: #1e293b; border-color: #334155; }
        .scan-btn { background: var(--bg-dark); color: white; padding: 12px; border-radius: 10px; font-weight: 700; font-size: 11px; text-transform: uppercase; width: 100%; position: relative; overflow: hidden; }
        
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px); }
        .modal-content { background: white; width: 100%; max-width: 400px; border-radius: 24px; padding: 25px; animation: slideUp 0.3s; }
        body.dark-mode .modal-content { background: var(--bg-card); color: white; }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .ticker-wrap { width: 100%; overflow: hidden; background: #000; color: #00ff41; font-family: 'JetBrains Mono', monospace; font-size: 10px; padding: 5px 0; white-space: nowrap; }
        .ticker-move { display: inline-block; animation: ticker 20s linear infinite; }
        @keyframes ticker { 0% { transform: translate3d(100%, 0, 0); } 100% { transform: translate3d(-100%, 0, 0); } }
        
        #notification-area { position: fixed; top: 20px; right: 20px; z-index: 200; display: flex; flex-direction: column; gap: 10px; }
        .notify-toast { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-left: 4px solid var(--primary); min-width: 280px; transform: translateX(120%); transition: 0.3s; }
        .notify-toast.show { transform: translateX(0); }
    </style>
</head>
<body>
    <div id="notification-area"></div>
    <div class="ticker-wrap sticky top-0 z-40"><div class="ticker-move">INITIALIZING MARKET DATA STREAM... VERIFYING ACCESS... BITCOIN: $92,400... ETHEREUM: $3,400...</div></div>

    <header class="glass-morphism sticky top-[25px] z-30 px-5 py-3 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-3">
            <div class="w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center text-white"><i class="fas fa-cube"></i></div>
            <div><h1 class="font-extrabold text-lg leading-tight">SILVERX</h1><span class="text-[9px] font-bold text-slate-400 uppercase">System Online</span></div>
        </div>
        <div class="flex gap-4 text-xl">
            <button onclick="themeManager.toggle()" class="text-slate-500"><i class="fas fa-moon"></i></button>
            <button onclick="sidebar.toggle(true)" class="text-slate-800 dark:text-white"><i class="fas fa-bars"></i></button>
        </div>
    </header>

    <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-40 hidden backdrop-blur-sm" onclick="sidebar.toggle(false)"></div>
    <aside id="sidebar">
        <div class="p-6 border-b dark:border-slate-700">
            <h2 class="text-2xl font-black mb-1 text-slate-800 dark:text-white">MENU</h2>
            <p class="text-xs text-slate-500" id="user-email-display">Loading...</p>
        </div>
        <div class="flex-1 py-4 overflow-y-auto">
            <div class="nav-item" onclick="modalManager.open('profile')"><i class="fas fa-user-circle w-6"></i> Profile</div>
            <div class="nav-item" onclick="modalManager.open('privacy')"><i class="fas fa-shield-alt w-6"></i> Privacy</div>
            <a href="https://wa.me/923064391353" target="_blank" class="nav-item text-green-600"><i class="fab fa-whatsapp w-6"></i> Support</a>
            <div class="my-4 border-t dark:border-slate-700"></div>
            <div class="nav-item" onclick="modalManager.open('vip')"><i class="fas fa-crown text-amber-500 w-6"></i> VIP Upgrade</div>
            <div class="nav-item" onclick="modalManager.open('recovery')"><i class="fas fa-life-ring text-orange-500 w-6"></i> Recovery</div>
        </div>
        <div class="p-4 border-t dark:border-slate-700">
            <button onclick="app.logout()" class="w-full bg-red-50 text-red-600 py-3 rounded-xl font-bold text-xs uppercase">Logout</button>
        </div>
    </aside>

    <main class="p-5 pb-24 max-w-2xl mx-auto space-y-6">
        <div class="dashboard-card stats-header">
            <div class="flex justify-between items-start mb-4">
                <div><p class="text-[10px] uppercase opacity-70">Account</p><div class="flex items-center gap-2 mt-1"><i id="status-icon" class="fas fa-user-shield"></i><span id="status-text" class="text-2xl font-black">FREE</span></div></div>
                <div class="text-right"><p class="text-[10px] uppercase opacity-70">Points</p><div class="flex items-center justify-end gap-1"><span id="points-display" class="text-3xl font-black">0</span></div></div>
            </div>
            <div class="w-full bg-black/30 h-1.5 rounded-full mb-4 overflow-hidden"><div id="xp-bar" class="bg-blue-500 h-full w-[0%] transition-all duration-1000"></div></div>
            <div class="grid grid-cols-2 gap-3">
                <button onclick="modalManager.open('withdraw')" class="bg-white/10 py-2 rounded-lg text-[10px] font-bold uppercase border border-white/10">Withdraw</button>
                <button onclick="window.location.reload()" class="bg-white/10 py-2 rounded-lg text-[10px] font-bold uppercase border border-white/10">Refresh</button>
            </div>
        </div>

        <div class="dashboard-card !p-0 h-[320px] bg-black border-2 border-slate-200 dark:border-slate-700 relative">
            <div class="absolute top-2 left-2 z-10 flex gap-2"><span class="bg-black/50 text-white text-[9px] font-bold px-2 py-1 rounded">EUR/USD</span><span class="bg-green-500/80 text-white text-[9px] font-bold px-2 py-1 rounded animate-pulse">LIVE</span></div>
            <div id="tv-chart" class="w-full h-full"></div>
        </div>

        <div class="grid grid-cols-2 gap-3">
            <a href="https://broker-qx.pro/sign-up/?lid=855720" target="_blank" class="dashboard-card !p-4 bg-blue-600 text-white text-center font-bold text-xs uppercase">Quotex</a>
            <a href="https://pocketoption.com/register" target="_blank" class="dashboard-card !p-4 bg-slate-800 text-white text-center font-bold text-xs uppercase">Pocket</a>
        </div>

        <div id="pairs-grid" class="grid grid-cols-2 gap-3"></div>

        <div class="dashboard-card mt-6">
            <h4 class="text-xs font-bold uppercase text-slate-400 mb-3">Live Order Book</h4>
            <div id="order-book" class="space-y-1 font-mono text-[10px]"></div>
        </div>
    </main>

    <div id="ad-modal" class="fixed inset-0 bg-white z-[999] hidden flex-col">
        <div class="p-4 border-b flex justify-between items-center bg-slate-50">
            <span class="font-black text-xs text-slate-500">SPONSORED</span>
            <div id="ad-timer" class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-xs font-bold">Waiting...</div>
            <button id="ad-close-btn" onclick="adManager.close()" class="hidden text-xl text-slate-800"><i class="fas fa-times-circle"></i></button>
        </div>
        <iframe id="ad-frame" class="flex-1 w-full border-none bg-slate-100"></iframe>
    </div>

    <div id="modal-withdraw" class="modal-overlay"><div class="modal-content"><h3 class="font-bold text-xl mb-4 text-black">Withdraw</h3><input id="wd-addr" class="w-full p-3 border rounded mb-2 text-black" placeholder="Wallet Address"><input id="wd-amt" class="w-full p-3 border rounded mb-4 text-black" placeholder="Amount (Min 5000)"><button onclick="app.submitWithdraw()" class="w-full bg-slate-900 text-white py-3 rounded font-bold text-xs">SUBMIT</button><button onclick="modalManager.close()" class="w-full mt-2 text-xs text-slate-400">CLOSE</button></div></div>
    
    <div id="modal-vip" class="modal-overlay"><div class="modal-content text-center"><i class="fas fa-crown text-4xl text-amber-500 mb-2"></i><h3 class="font-bold text-xl text-black">VIP Upgrade</h3><p class="text-xs text-slate-500 mb-4">No Ads • Zero Latency</p><div class="bg-slate-100 p-2 rounded mb-2"><img src="qr.jpg" class="w-24 h-24 mx-auto" onerror="this.src='https://cdn-icons-png.flaticon.com/512/714/714390.png'"><p class="text-black font-bold">403009858 (Binance)</p></div><input id="vip-tx" class="w-full p-3 border rounded mb-2 text-black" placeholder="Transaction ID"><button onclick="app.submitVIP()" class="w-full bg-amber-500 py-3 rounded font-bold text-xs">VERIFY</button><button onclick="modalManager.close()" class="w-full mt-2 text-xs text-slate-400">CLOSE</button></div></div>
    
    <div id="modal-recovery" class="modal-overlay"><div class="modal-content"><h3 class="font-bold text-xl text-black">Recovery</h3><input id="rec-tx" class="w-full p-3 border rounded mb-4 text-black" placeholder="Payment TxID"><button onclick="app.submitRecovery()" class="w-full bg-orange-600 text-white py-3 rounded font-bold text-xs">START RECOVERY</button><button onclick="modalManager.close()" class="w-full mt-2 text-xs text-slate-400">CLOSE</button></div></div>
    
    <div id="modal-privacy" class="modal-overlay"><div class="modal-content"><h3 class="font-bold text-xl mb-2 text-black">Policy</h3><div id="privacy-text" class="h-40 overflow-y-auto text-xs text-slate-600 mb-2"></div><button onclick="modalManager.close()" class="w-full bg-black text-white py-3 rounded font-bold text-xs">ACCEPT</button></div></div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyAyXzJ1UUdtWe96NjiQbVCqnWdIv8XakhA", authDomain: "silverxtrader.firebaseapp.com", projectId: "silverxtrader", storageBucket: "silverxtrader.firebasestorage.app", messagingSenderId: "46330013690", appId: "1:46330013690:web:c2aad241ad7abd49e0e643" };
        
        class NotificationSystem {
            constructor() { this.container = document.getElementById('notification-area'); }
            show(msg, type) {
                const t = document.createElement('div'); t.className = `notify-toast border-l-4 ${type==='error'?'border-red-500':'border-blue-500'}`;
                t.innerHTML = `<div class="flex gap-2"><i class="fas fa-info-circle"></i><span>${msg}</span></div>`;
                this.container.appendChild(t); requestAnimationFrame(()=>t.classList.add('show')); setTimeout(()=>{t.classList.remove('show');setTimeout(()=>t.remove(),300)},3000);
            }
        }
        class ThemeManager {
            constructor() { this.isDark = localStorage.getItem('theme')==='dark'; this.apply(); }
            toggle() { this.isDark=!this.isDark; localStorage.setItem('theme',this.isDark?'dark':'light'); this.apply(); }
            apply() { document.body.classList.toggle('dark-mode',this.isDark); }
        }
        class AdManager {
            constructor() { this.modal=document.getElementById('ad-modal'); this.frame=document.getElementById('ad-frame'); this.timerEl=document.getElementById('ad-timer'); this.closeBtn=document.getElementById('ad-close-btn'); }
            start(cb) {
                this.onComplete=cb; this.modal.style.display='flex'; this.closeBtn.classList.add('hidden');
                this.frame.src="https://www.effectivegatecpm.com/zu9fwwufi?key=5c01f6e26f4b9943913f0d36bfa48f6d";
                let t=10; const i=setInterval(()=>{ t--; this.timerEl.innerText=`WAIT ${t}s`; if(t<=0){clearInterval(i);this.timerEl.innerText="REWARD UNLOCKED";this.closeBtn.classList.remove('hidden');} },1000);
            }
            close() { this.modal.style.display='none'; this.frame.src=""; if(this.onComplete)this.onComplete(); }
        }
        class ModalManager {
            open(id) { document.getElementById(`modal-${id}`).style.display='flex'; sidebar.toggle(false); }
            close() { document.querySelectorAll('.modal-overlay').forEach(m=>m.style.display='none'); }
        }
        class AppManager {
            constructor() {
                firebase.initializeApp(firebaseConfig); this.auth=firebase.auth(); this.db=firebase.firestore(); emailjs.init("zqFa81v7RThJXvikM");
                this.user=null; this.userData={points:0,status:'Free'}; this.init();
            }
            init() {
                this.auth.onAuthStateChanged(u=>{ if(!u)window.location.href="index.html"; this.user=u; document.getElementById('user-email-display').innerText=u.email; this.listenToUser(); });
                this.renderPairs(); this.initChart(); this.startFakeOrderBook(); document.getElementById('privacy-text').innerHTML="<p>1. Data Collection: Basic auth only.<br>2. Risk: Trading is risky.<br>3. VIP: Non-refundable.</p>";
            }
            listenToUser() {
                this.db.collection('users').doc(this.user.uid).onSnapshot(d=>{ if(d.exists){ this.userData=d.data(); this.updateUI(); } });
            }
            updateUI() {
                document.getElementById('points-display').innerText=this.userData.points||0;
                document.getElementById('status-text').innerText=(this.userData.status||"Free").toUpperCase();
                if(this.userData.status==='VIP') document.getElementById('status-text').classList.add('text-amber-500');
                document.getElementById('xp-bar').style.width=`${Math.min((this.userData.points/5000)*100,100)}%`;
            }
            renderPairs() {
                const g=document.getElementById('pairs-grid'); g.innerHTML="";
                ["EUR/USD","GBP/USD","USD/JPY","BTC/USD"].forEach((p,i)=>{
                    g.innerHTML+=`<div class="pair-card"><div class="flex justify-between"><span class="font-bold dark:text-white">${p}</span><span class="text-green-500 text-xs">9${i}%</span></div><button id="btn-sig-${i}" onclick="app.requestSignal('${i}')" class="scan-btn">SCAN MARKET</button></div>`;
                });
            }
            requestSignal(id) {
                this.cid=id; if(this.userData.status==="VIP") this.processSignal(); else adManager.start(()=>{ 
                    this.db.collection('users').doc(this.user.uid).update({points:firebase.firestore.FieldValue.increment(1)}); this.processSignal(); 
                });
            }
            processSignal() {
                const b=document.getElementById(`btn-sig-${this.cid}`); b.innerHTML="ANALYZING..."; b.disabled=true;
                setTimeout(()=>{ 
                    const isBuy=Math.random()>0.5; b.className=`scan-btn ${isBuy?'bg-green-500':'bg-red-500'}`; b.innerHTML=isBuy?"CALL ⬆":"PUT ⬇";
                    setTimeout(()=>{b.className="scan-btn";b.innerHTML="SCAN MARKET";b.disabled=false;},60000);
                },2000);
            }
            startFakeOrderBook() {
                const b=document.getElementById('order-book');
                setInterval(()=>{
                    const t=Math.random()>0.5?'BID':'ASK'; const c=t==='BID'?'text-green-500':'text-red-500';
                    b.innerHTML=`<div class="flex justify-between border-b dark:border-slate-800"><span class="${c}">${t}</span><span class="dark:text-slate-300">${(1.05+Math.random()*0.01).toFixed(5)}</span></div>`+b.innerHTML;
                    if(b.children.length>6)b.lastElementChild.remove();
                },800);
            }
            submitWithdraw() {
                const a=document.getElementById('wd-addr').value; const m=parseInt(document.getElementById('wd-amt').value);
                if(m>this.userData.points)return notify.show("Insufficient Points","error");
                this.db.collection('withdraw_requests').add({uid:this.user.uid,email:this.user.email,address:a,amount:m,date:new Date()}).then(()=>{notify.show("Sent!");modalManager.close()});
            }
            submitVIP() {
                const t=document.getElementById('vip-tx').value; if(!t)return notify.show("TxID Required","error");
                this.db.collection('vip_requests').add({uid:this.user.uid,email:this.user.email,txid:t,date:new Date()}).then(()=>{notify.show("Reviewing...");modalManager.close()});
            }
            submitRecovery() { window.location.href=`https://wa.me/923064391353?text=RECOVERY:${document.getElementById('rec-tx').value}`; }
            logout() { this.auth.signOut().then(()=>window.location.href="index.html"); }
        }

        const notify = new NotificationSystem(); const themeManager = new ThemeManager(); const adManager = new AdManager(); const modalManager = new ModalManager();
        const sidebar = { toggle:(s)=>{ document.getElementById('sidebar').classList.toggle('active',s); document.getElementById('sidebar-overlay').style.display=s?'block':'none'; }};
        new TradingView.widget({"container_id":"tv-chart","autosize":true,"symbol":"FX:EURUSD","interval":"1","theme":"dark","style":"1","toolbar_bg":"#f1f3f6","hide_top_toolbar":true});
        const app = new AppManager();
    </script>
</body>
    </html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SilverX Elite Terminal</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
        /* CORE DESIGN */
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700;800&display=swap');
        body { background-color: #0f172a; color: white; font-family: 'Rajdhani', sans-serif; overflow-x: hidden; }
        
        /* HENDECAGON (11-Sided Ring) ANIMATION */
        .hendecagon {
            width: 70px; height: 70px; background: transparent; position: relative; display: flex; align-items: center; justify-content: center;
            clip-path: polygon(50% 0%, 80% 10%, 100% 35%, 100% 70%, 80% 90%, 50% 100%, 20% 90%, 0% 70%, 0% 35%, 20% 10%);
        }
        .ring-border { position: absolute; inset: -2px; background: conic-gradient(#3b82f6, transparent, #3b82f6); animation: rotate 4s linear infinite; z-index: -1; }
        .chip-icon { font-size: 1.5rem; color: #3b82f6; z-index: 2; }
        
        /* MUSIC WAVES */
        .wave-line { position: absolute; width: 2px; background: #3b82f6; bottom: 50%; height: 10px; animation: wave 1s infinite ease-in-out; }
        @keyframes wave { 0%,100%{height:10px} 50%{height:30px} }
        @keyframes rotate { 0%{transform: rotate(0deg)} 100%{transform: rotate(360deg)} }
        
        /* SIGNAL COLORS */
        .buy-mode .ring-border { background: conic-gradient(#22c55e, transparent, #22c55e); }
        .buy-mode .chip-icon, .buy-mode .wave-line { color: #22c55e; background: #22c55e; }
        .sell-mode .ring-border { background: conic-gradient(#ef4444, transparent, #ef4444); }
        .sell-mode .chip-icon, .sell-mode .wave-line { color: #ef4444; background: #ef4444; }

        /* VIP THEME OVERRIDES */
        .vip-theme { background: #000; background-image: radial-gradient(#fbbf241a 1px, transparent 1px); background-size: 20px 20px; }
        .vip-theme .glass-card { border: 1px solid #fbbf24; box-shadow: 0 0 15px rgba(251, 191, 36, 0.2); }
        
        /* UTILS */
        .glass-card { background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; }
        .candle-bg { position: absolute; bottom: 5px; right: 5px; opacity: 0.2; width: 40px; }
        
        /* AD OVERLAY */
        #ad-overlay { position: fixed; inset: 0; background: white; z-index: 9999; display: none; flex-direction: column; }
    </style>
</head>
<body id="app-body">

    <div id="sidebar" class="fixed inset-y-0 left-[-100%] w-[80%] bg-slate-900 z-[5000] transition-all duration-300 p-6 shadow-2xl border-r border-slate-700">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-2xl font-black uppercase tracking-widest text-white">SilverX <span class="text-blue-500">Menu</span></h2>
            <button onclick="toggleMenu()" class="text-slate-400"><i class="fas fa-arrow-left text-xl"></i></button>
        </div>
        <div class="space-y-4 font-bold text-sm text-slate-300">
            <a href="https://wa.me/923064391353" class="block p-4 bg-slate-800 rounded-xl"><i class="fab fa-whatsapp text-green-400 mr-2"></i> WhatsApp Help</a>
            <a href="https://www.youtube.com/@kingtraderofficial45" class="block p-4 bg-slate-800 rounded-xl"><i class="fab fa-youtube text-red-400 mr-2"></i> YouTube Training</a>
            <a href="#" class="block p-4 bg-slate-800 rounded-xl"><i class="fab fa-tiktok text-pink-400 mr-2"></i> TikTok Analysis</a>
            <button onclick="showModal('policy-modal')" class="block w-full text-left p-4 bg-slate-800 rounded-xl"><i class="fas fa-shield-alt text-blue-400 mr-2"></i> Privacy Policy</button>
            <button onclick="auth.signOut()" class="block w-full text-left p-4 bg-red-900/20 text-red-400 rounded-xl border border-red-900"><i class="fas fa-sign-out-alt mr-2"></i> Logout</button>
        </div>
    </div>

    <header class="sticky top-0 z-40 bg-slate-900/90 backdrop-blur-md border-b border-slate-700 px-4 py-3 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <button onclick="toggleMenu()" class="text-white text-xl"><i class="fas fa-bars"></i></button>
            <div>
                <h1 class="font-black text-lg uppercase leading-none tracking-tighter">SilverX <span id="logo-sfx" class="text-blue-500">AI</span></h1>
                <p id="live-clock" class="text-[10px] text-slate-400 font-mono">00:00:00 UTC</p>
            </div>
        </div>
        <div class="px-3 py-1 bg-slate-800 rounded-lg text-[10px] font-bold uppercase tracking-wider" id="status-badge">FREE</div>
    </header>

    <main class="p-4 pb-32">
        <div id="point-section" class="glass-card p-5 mb-5 relative overflow-hidden">
            <div class="flex justify-between items-end relative z-10">
                <div>
                    <p class="text-[10px] text-slate-400 uppercase font-bold">Wallet Balance</p>
                    <h2 class="text-4xl font-black text-white"><span id="pts-val">0</span> <span class="text-sm text-blue-400">PTS</span></h2>
                </div>
                <button onclick="showModal('withdraw-modal')" class="bg-blue-600 hover:bg-blue-500 text-white px-5 py-2 rounded-lg text-xs font-black uppercase shadow-lg transition">Withdraw</button>
            </div>
            <div class="mt-3 text-[9px] text-slate-500 border-t border-slate-700 pt-2 flex justify-between">
                <span>Rate: 5000 PTS = $5</span>
                <span class="text-green-400">‚óè Live Sync</span>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-5">
            <button onclick="showModal('vip-modal')" class="glass-card p-4 bg-gradient-to-br from-amber-500/10 to-transparent border-amber-500/30 text-amber-400 font-black text-xs uppercase hover:scale-105 transition">
                <i class="fas fa-crown text-xl mb-1 block"></i> Upgrade VIP
            </button>
            <button onclick="showModal('recovery-modal')" class="glass-card p-4 text-blue-400 font-black text-xs uppercase hover:scale-105 transition">
                <i class="fas fa-chart-line text-xl mb-1 block"></i> Recovery
            </button>
        </div>

        <div class="glass-card p-1 flex gap-1 mb-6">
            <a href="https://broker-qx.pro/sign-up/?lid=1696715" target="_blank" class="flex-1 py-3 rounded-xl bg-green-600 text-center font-bold text-[10px] uppercase shadow-md">Join Quotex</a>
            <a href="https://po-ru4.click/register?utm_campaign=835777&utm_source=affiliate&utm_medium=sr&a=JbsX5mZ1ZchgeZ&ac=pak_users_2026" target="_blank" class="flex-1 py-3 rounded-xl bg-blue-600 text-center font-bold text-[10px] uppercase shadow-md">Join Pocket</a>
        </div>

        <div class="flex gap-2 mb-4">
            <button onclick="switchBroker('qx')" id="btn-qx" class="flex-1 py-2 rounded-lg bg-slate-800 text-[10px] font-bold uppercase border border-blue-500">Quotex</button>
            <button onclick="switchBroker('po')" id="btn-po" class="flex-1 py-2 rounded-lg bg-slate-800 text-[10px] font-bold uppercase opacity-50">Pocket Option</button>
        </div>

        <div id="signals-grid" class="grid grid-cols-2 gap-4">
            </div>
    </main>

    <div id="generic-modal" class="fixed inset-0 z-[6000] bg-black/90 hidden items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-slate-900 border border-slate-700 rounded-3xl w-full max-w-sm max-h-[90vh] overflow-y-auto p-6 relative shadow-2xl">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-500"><i class="fas fa-times text-xl"></i></button>
            <div id="modal-content"></div>
        </div>
    </div>

    <div id="ad-overlay">
        <div class="p-3 bg-white border-b flex justify-between items-center shadow-md">
            <span id="ad-timer" class="text-red-600 font-black text-xs bg-red-100 px-3 py-1 rounded-full">WAIT: 15s</span>
            <button id="ad-close-btn" class="hidden text-slate-800 font-bold" onclick="finishAd()">CLOSE <i class="fas fa-times"></i></button>
        </div>
        <iframe id="ad-frame" src="" class="w-full h-full border-0"></iframe>
    </div>

    <script>
        // --- 1. CONFIG & SETUP ---
        const firebaseConfig = { apiKey: "AIzaSyAyXzJ1UUdtWe96NjiQbVCqnWdIv8XakhA", authDomain: "silverxtrader.firebaseapp.com", projectId: "silverxtrader", storageBucket: "silverxtrader.firebasestorage.app", messagingSenderId: "46330013690", appId: "1:46330013690:web:c2aad241ad7abd49e0e643" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // VARIABLES
        let userStatus = "Free";
        let userPoints = 0;
        let cooldown = false;
        const adLinks = ["https://www.effectivegatecpm.com/zu9fwwufi?key=5c01f6e26f4b9943913f0d36bfa48f6d", "https://www.effectivegatecpm.com/m3re02atee?key=cebdb997452acac01a6d39d48dcb0e68"];
        const pairsFree = ["EUR/USD", "GBP/USD", "USD/JPY", "BTC/USD", "ETH/USD", "AUD/CAD", "NZD/USD", "USD/CHF", "EUR/JPY", "GBP/JPY", "XAU/USD", "USDT/USD", "BNB/USD", "XRP/USD", "ADA/USD", "DOGE/USD"];
        const pairsVIP = [...pairsFree, "SOL/USD", "LTC/USD", "EUR/GBP", "AUD/JPY", "CAD/JPY", "USD/MXN", "USD/BRL", "OTC/GEM"];

        // --- 2. AUTH & STATE ---
        auth.onAuthStateChanged(user => {
            if (!user) window.location.href = 'index.html';
            // Live Listener for Anti-Cheat
            db.collection('users').doc(user.uid).onSnapshot(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    userStatus = data.status || "Free";
                    userPoints = data.points || 0;
                    updateUI();
                }
            });
        });

        function updateUI() {
            document.getElementById('pts-val').innerText = userPoints;
            document.getElementById('status-badge').innerText = userStatus;
            
            if (userStatus === 'VIP') {
                document.getElementById('app-body').classList.add('vip-theme');
                document.getElementById('point-section').style.display = 'none';
                document.getElementById('status-badge').className = "px-3 py-1 bg-amber-500 text-black rounded-lg text-[10px] font-black uppercase tracking-wider shadow-[0_0_15px_#fbbf24]";
                document.getElementById('logo-sfx').classList.replace('text-blue-500', 'text-amber-500');
                renderSignals(pairsVIP);
            } else {
                renderSignals(pairsFree);
            }
        }

        // --- 3. RENDERING SIGNALS (HENDECAGON STYLE) ---
        function renderSignals(list) {
            const grid = document.getElementById('signals-grid');
            grid.innerHTML = '';
            list.forEach((pair, idx) => {
                const boxId = `box-${idx}`;
                grid.innerHTML += `
                <div class="glass-card p-4 relative overflow-hidden text-center group transition-all duration-300 border-b-2 border-blue-500/30" id="${boxId}">
                    <div class="flex justify-between items-center text-[10px] font-bold text-slate-400 mb-2">
                        <span>${pair}</span>
                        <span class="text-green-500">9${Math.floor(Math.random()*5+4)}% ACC</span>
                    </div>
                    
                    <div class="mx-auto hendecagon mb-2">
                        <div class="ring-border"></div>
                        <i class="fas fa-microchip chip-icon"></i>
                        <div class="wave-line" style="left: 10%"></div>
                        <div class="wave-line" style="right: 10%"></div>
                    </div>
                    
                    <div class="candle-bg text-4xl">üïØÔ∏è</div>

                    <button onclick="handleSignal('${boxId}')" class="w-full py-3 bg-slate-900 rounded-xl text-[10px] font-black uppercase border border-slate-700 hover:bg-slate-800 transition relative z-10" id="btn-${boxId}">
                        GET SIGNAL
                    </button>
                </div>`;
            });
        }

        // --- 4. SIGNAL LOGIC ---
        function handleSignal(boxId) {
            const btn = document.getElementById(`btn-${boxId}`);
            
            if(userStatus === "Free") {
                if(cooldown) { alert("Please wait 60s for next signal!"); return; }
                // Show Ad first
                launchAd(() => {
                    cooldown = true;
                    btn.innerText = "Analyzing...";
                    simulateAnalysis(boxId, 5000, 85); // 5s delay
                    setTimeout(() => { cooldown = false; }, 60000); // 60s cooldown
                });
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SilverX Terminal</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
        /* BASE & FONTS */
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700;800&display=swap');
        body { background-color: #0f172a; color: white; font-family: 'Rajdhani', sans-serif; overflow-x: hidden; }
        
        /* 1. HENDECAGON ANIMATION (11 Sided Polygon Logic) */
        .hendecagon-wrapper { position: relative; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto; }
        .hendecagon-ring {
            position: absolute; width: 100%; height: 100%;
            clip-path: polygon(50% 0%, 78% 5%, 98% 25%, 100% 55%, 85% 80%, 55% 100%, 25% 95%, 5% 75%, 0% 45%, 15% 15%, 40% 2%);
            background: transparent; border: 2px solid #3b82f6; z-index: 10;
        }
        /* Spinning dashed ring outside */
        .outer-spin { position: absolute; width: 110%; height: 110%; border: 1px dashed rgba(59,130,246,0.5); border-radius: 50%; animation: spin 10s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* MUSIC WAVES (Lines coming out) */
        .music-wave { position: absolute; width: 2px; height: 10px; background: #3b82f6; animation: wave 1s ease-in-out infinite; }
        .wave-1 { top: -10px; left: 50%; animation-delay: 0.1s; }
        .wave-2 { bottom: -10px; left: 50%; animation-delay: 0.2s; }
        .wave-3 { left: -10px; top: 50%; animation-delay: 0.3s; }
        .wave-4 { right: -10px; top: 50%; animation-delay: 0.4s; }
        @keyframes wave { 0%, 100% { height: 10px; opacity: 0.5; } 50% { height: 25px; opacity: 1; } }

        /* BOX STATES */
        .box-default { border: 2px solid #3b82f6; box-shadow: 0 0 10px rgba(59,130,246,0.1); }
        
        .box-buy .hendecagon-ring { border-color: #22c55e; background: rgba(34,197,94,0.1); }
        .box-buy .music-wave { background: #22c55e; }
        .box-buy { border-color: #22c55e; box-shadow: 0 0 20px rgba(34,197,94,0.4); }

        .box-sell .hendecagon-ring { border-color: #ef4444; background: rgba(239,68,68,0.1); }
        .box-sell .music-wave { background: #ef4444; }
        .box-sell { border-color: #ef4444; box-shadow: 0 0 20px rgba(239,68,68,0.4); }

        /* VIP THEME */
        .vip-mode { background: #000; }
        .vip-mode .box-default { border-color: #fbbf24; }
        .vip-mode .hendecagon-ring { border-color: #fbbf24; }
        .vip-mode .music-wave { background: #fbbf24; }
        .vip-mode .text-blue-500 { color: #fbbf24 !important; }

        /* UTILS */
        .glass { background: rgba(30,41,59,0.9); backdrop-filter: blur(10px); border-radius: 16px; border: 1px solid #334155; }
        .modal-bg { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 9000; display: none; overflow-y: auto; padding: 20px; }
    </style>
</head>
<body id="main-body">

    <div id="sidebar" class="fixed inset-y-0 left-[-100%] w-[85%] bg-slate-900 z-[8000] border-r border-slate-700 transition-all duration-300 p-5 shadow-2xl">
        <div class="flex justify-between items-center mb-10">
            <h2 class="text-2xl font-black uppercase text-white">SilverX <span class="text-blue-500">Menu</span></h2>
            <button onclick="toggleSidebar()"><i class="fas fa-arrow-left text-slate-400 text-xl"></i></button>
        </div>
        <div class="space-y-3">
            <a href="https://wa.me/923064391353" class="block p-4 bg-slate-800 rounded-xl font-bold text-sm"><i class="fab fa-whatsapp text-green-500 mr-2"></i> WhatsApp Help</a>
            <a href="https://www.youtube.com/@kingtraderofficial45" class="block p-4 bg-slate-800 rounded-xl font-bold text-sm"><i class="fab fa-youtube text-red-500 mr-2"></i> YouTube Training</a>
            <a href="#" class="block p-4 bg-slate-800 rounded-xl font-bold text-sm"><i class="fab fa-tiktok text-pink-500 mr-2"></i> TikTok Analysis</a>
            <button onclick="openModal('policy')" class="block w-full text-left p-4 bg-slate-800 rounded-xl font-bold text-sm"><i class="fas fa-file-contract text-blue-500 mr-2"></i> Privacy Policy</button>
            <button onclick="auth.signOut()" class="block w-full text-left p-4 bg-red-900/30 text-red-400 rounded-xl font-bold text-sm mt-10"><i class="fas fa-power-off mr-2"></i> Logout</button>
        </div>
    </div>

    <header class="sticky top-0 z-50 bg-slate-900/90 backdrop-blur border-b border-slate-700 px-4 py-3 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <button onclick="toggleSidebar()"><i class="fas fa-bars text-xl"></i></button>
            <div>
                <h1 class="text-lg font-black uppercase leading-none">SilverX <span class="text-blue-500" id="brand-color">AI</span></h1>
                <p id="clock" class="text-[10px] text-slate-400 font-mono">00:00:00</p>
            </div>
        </div>
        <div id="status-badge" class="px-3 py-1 bg-slate-800 rounded text-[10px] font-bold uppercase">LOADING</div>
    </header>

    <main class="p-4 pb-32">
        <div id="points-container" class="glass p-5 mb-5 relative overflow-hidden">
            <div class="flex justify-between items-end relative z-10">
                <div>
                    <p class="text-[10px] text-slate-400 font-bold uppercase">Balance</p>
                    <h2 class="text-4xl font-black"><span id="pts">0</span> <span class="text-sm text-blue-500">PTS</span></h2>
                </div>
                <button onclick="openModal('withdraw')" class="bg-blue-600 hover:bg-blue-500 text-white px-5 py-2 rounded-lg text-xs font-black uppercase shadow-lg">Withdraw</button>
            </div>
            <div class="mt-3 pt-3 border-t border-slate-700 flex justify-between text-[9px] uppercase text-slate-400 font-bold">
                <span>5000 PTS = $5 USD</span>
                <span class="text-green-500 animate-pulse">‚óè Live Sync</span>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-5">
            <button onclick="openModal('vip')" class="glass p-4 text-amber-400 border border-amber-500/30 hover:bg-amber-500/10 transition">
                <i class="fas fa-crown text-2xl mb-1 block"></i>
                <span class="font-black text-xs uppercase">Join VIP</span>
            </button>
            <button onclick="openModal('recovery')" class="glass p-4 text-blue-400 border border-blue-500/30 hover:bg-blue-500/10 transition">
                <i class="fas fa-shield-halved text-2xl mb-1 block"></i>
                <span class="font-black text-xs uppercase">Recovery</span>
            </button>
        </div>

        <div class="glass p-1 mb-5 flex gap-1">
            <a href="https://broker-qx.pro/sign-up/?lid=1696715" target="_blank" class="flex-1 py-3 bg-green-600 rounded-lg text-center font-bold text-[10px] uppercase">Join Quotex</a>
            <a href="https://po-ru4.click/register?utm_campaign=835777&utm_source=affiliate&utm_medium=sr&a=JbsX5mZ1ZchgeZ&ac=pak_users_2026" target="_blank" class="flex-1 py-3 bg-blue-600 rounded-lg text-center font-bold text-[10px] uppercase">Join Pocket</a>
        </div>

        <div class="flex mb-4 bg-slate-800 p-1 rounded-lg">
            <button class="flex-1 py-2 bg-slate-700 rounded text-[10px] font-bold uppercase text-white">Quotex</button>
            <button class="flex-1 py-2 text-[10px] font-bold uppercase text-slate-500">Pocket Option</button>
        </div>

        <div id="signal-grid" class="grid grid-cols-2 gap-4">
            </div>
    </main>

    <div id="modal-overlay" class="modal-bg">
        <div class="bg-slate-900 border border-slate-700 rounded-2xl p-6 max-w-sm mx-auto mt-10 relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-500"><i class="fas fa-times text-xl"></i></button>
            <div id="modal-content"></div>
        </div>
    </div>

    <div id="ad-view" class="fixed inset-0 bg-white z-[9999] hidden flex-col">
        <div class="p-4 bg-slate-100 flex justify-between items-center shadow">
            <span id="ad-timer" class="text-red-600 font-black">WAIT 15s</span>
            <button id="ad-close" class="hidden font-bold text-slate-900" onclick="endAd()">CLOSE X</button>
        </div>
        <iframe id="ad-frame" class="flex-1 w-full border-none"></iframe>
    </div>

    <script>
        // CONFIG
        const firebaseConfig = { apiKey: "AIzaSyAyXzJ1UUdtWe96NjiQbVCqnWdIv8XakhA", authDomain: "silverxtrader.firebaseapp.com", projectId: "silverxtrader", storageBucket: "silverxtrader.firebasestorage.app", messagingSenderId: "46330013690", appId: "1:46330013690:web:c2aad241ad7abd49e0e643" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // STATE
        let user = null;
        let points = 0;
        let status = "Free";
        let cooldown = false;
        const adLinks = ["https://www.effectivegatecpm.com/zu9fwwufi?key=5c01f6e26f4b9943913f0d36bfa48f6d", "https://www.effectivegatecpm.com/m3re02atee?key=cebdb997452acac01a6d39d48dcb0e68"];
        
        const freePairs = ["EUR/USD", "GBP/USD", "USD/JPY", "BTC/USD", "ETH/USD", "AUD/CAD", "NZD/USD", "USD/CHF", "EUR/JPY", "GBP/JPY", "XAU/USD", "USDT/USD", "BNB/USD", "XRP/USD", "ADA/USD", "DOGE/USD"];
        const vipPairs = [...freePairs, "SOL/USD", "LTC/USD", "EUR/GBP", "AUD/JPY", "CAD/JPY", "USD/MXN", "USD/BRL", "OTC/GEM"];

        // SETUP
        auth.onAuthStateChanged(u => {
            if(!u) window.location.href = 'index.html';
            user = u;
            db.collection('users').doc(u.uid).onSnapshot(doc => {
                if(doc.exists) {
                    const d = doc.data();
                    points = d.points || 0;
                    status = d.status || "Free";
                    updateUI();
                }
            });
        });

        function updateUI() {
            document.getElementById('pts').innerText = points;
            const badge = document.getElementById('status-badge');
            badge.innerText = status;
            
            if(status === 'VIP') {
                document.body.classList.add('vip-mode');
                document.getElementById('points-container').style.display = 'none';
                badge.className = "px-3 py-1 bg-amber-500 text-black rounded text-[10px] font-black uppercase";
                renderGrid(vipPairs);
            } else {
                renderGrid(freePairs);
            }
        }

        // RENDER GRID (HENDECAGON LOGIC)
        function renderGrid(pairs) {
            const grid = document.getElementById('signal-grid');
            grid.innerHTML = "";
            pairs.forEach((p, i) => {
                const id = `box-${i}`;
                grid.innerHTML += `
                <div id="${id}" class="glass p-4 box-default relative overflow-hidden text-center transition-all duration-300">
                    <div class="flex justify-between items-center mb-4 border-b border-white/10 pb-2">
                        <span class="text-[10px] font-bold text-slate-300">${p}</span>
                        <span class="text-[9px] text-green-500 font-bold">WIN 9${Math.floor(Math.random()*9)}%</span>
                    </div>
                    
                    <div class="hendecagon-wrapper">
                        <div class="outer-spin"></div>
                        <div class="hendecagon-ring"></div>
                        <i class="fas fa-microchip text-2xl text-blue-500 relative z-20" id="icon-${id}"></i>
                        <div class="music-wave wave-1"></div>
                        <div class="music-wave wave-2"></div>
                        <div class="music-wave wave-3"></div>
                        <div class="music-wave wave-4"></div>
                    </div>

                    <div class="absolute bottom-2 right-2 opacity-20 text-3xl">üïØÔ∏è</div>
                    
                    <button id="btn-${id}" onclick="getSignal('${id}')" class="w-full mt-4 py-3 bg-slate-800 rounded-lg text-[10px] font-black uppercase border border-slate-600 relative z-30">
                        GET SIGNAL
                    </button>
                </div>`;
            });
        }

        // SIGNAL LOGIC
        function getSignal(id) {
            const btn = document.getElementById(`btn-${id}`);
            if(status === "Free") {
                if(cooldown) { alert("Please wait 60 seconds."); return; }
                // 1. AD
                startAd(() => {
                    // 2. DELAY
                    btn.innerText = "LOADING...";
                    setTimeout(() => {
                        showResult(id);
                        cooldown = true;
                        setTimeout(() => cooldown = false, 60000); // 60s Lock
                    }, 5000); // 5s Delay
                });
            } else {
                // VIP: Instant
                btn.innerText = "AI SCAN...";
                setTimeout(() => showResult(id), 2000); // 2-3s Instant
            }
        }

        function showResult(id) {
            const box = document.getElementById(id);
            const btn = document.getElementById(`btn-${id}`);
            const isBuy = Math.random() > 0.5;
            
            if(isBuy) {
                box.classList.add('box-buy');
                btn.className = "w-full mt-4 py-3 bg-green-600 text-white rounded-lg text-[10px] font-black uppercase shadow-lg";
                btn.innerHTML = "CALL / UP <i class='fas fa-arrow-up'></i>";
            } else {
                box.classList.add('box-sell');
                btn.className = "w-full mt-4 py-3 bg-red-600 text-white rounded-lg text-[10px] font-black uppercase shadow-lg";
                btn.innerHTML = "PUT / DOWN <i class='fas fa-arrow-down'></i>";
            }

            // Reset after 10s
            setTimeout(() => {
                box.classList.remove('box-buy', 'box-sell');
                btn.className = "w-full mt-4 py-3 bg-slate-800 rounded-lg text-[10px] font-black uppercase border border-slate-600 relative z-30";
                btn.innerText = status === 'Free' ? `WAIT ${50}s` : "GET SIGNAL";
            }, 10000);
        }

        // AD SYSTEM
        let adCb = null;
        function startAd(cb) {
            adCb = cb;
            document.getElementById('ad-view').style.display = 'flex';
            document.getElementById('ad-frame').src = adLinks[Math.floor(Math.random()*adLinks.length)];
            let t = 15; // 10-30s rotation
            const timer = document.getElementById('ad-timer');
            const close = document.getElementById('ad-close');
            close.style.display = 'none';
            
            const int = setInterval(() => {
                t--;
                timer.innerText = `WAIT ${t}s`;
                if(t <= 0) {
                    clearInterval(int);
                    timer.innerText = "COMPLETED";
                    close.style.display = 'block';
                }
            }, 1000);
        }
        function endAd() {
            document.getElementById('ad-view').style.display = 'none';
            db.collection('users').doc(user.uid).update({ points: firebase.firestore.FieldValue.increment(1) });
            if(adCb) adCb();
        }

        // MODALS & RULES (EXACT TEXT)
        function openModal(type) {
            const m = document.getElementById('modal-overlay');
            const c = document.getElementById('modal-content');
            m.style.display = 'block';
            
            if(type === 'policy') {
                c.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-blue-500">PRIVACY & RULES</h3>
                <div class="h-60 overflow-y-auto text-[10px] text-slate-300 space-y-3">
                    <p>1. <strong>Loss Risk:</strong> Trading involves high risk. You may lose capital.</p>
                    <p>2. <strong>Market Volatility:</strong> Signals depend on market conditions which change rapidly.</p>
                    <p>3. <strong>AI Logic:</strong> We use institutional data, but 100% accuracy is impossible.</p>
                    <p>4. <strong>No Guarantee:</strong> Past performance does not guarantee future results.</p>
                    <p>5. <strong>Risk Mgmt:</strong> Never trade more than 5% of your balance per trade.</p>
                    <p>6. <strong>Stop Loss:</strong> Always set a stop loss to protect your funds.</p>
                    <p>7. <strong>Greed Control:</strong> Do not overtrade. Follow the daily target.</p>
                    <p>8. <strong>Safe Trading:</strong> Use demo accounts before real money.</p>
                    <p>9. <strong>Data Privacy:</strong> We do not share your email with third parties.</p>
                    <p>10. <strong>Points:</strong> Points have no cash value until withdrawn.</p>
                    <p>11. <strong>Ban Policy:</strong> Multiple accounts will lead to a permanent ban.</p>
                    <p>12. <strong>Agreement:</strong> By using this tool, you accept all risks.</p>
                </div>`;
            }
            else if(type === 'withdraw') {
                c.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-white">WITHDRAW FUNDS</h3>
                <div class="bg-slate-800 p-3 rounded mb-4 text-[10px] text-slate-400 space-y-1">
                    <p>1. Minimum withdrawal is 5000 Points ($5).</p>
                    <p>2. Only TRC20 or Binance Pay ID accepted.</p>
                    <p>3. Wrong address will result in total loss.</p>
                    <p>4. Payment processing takes 24-48 hours.</p>
                    <p>5. Points are deducted instantly upon request.</p>
                    <p>6. Status will remain 'Pending' until admin approves.</p>
                </div>
                <div class="mb-4 text-center">
                    <span class="text-2xl font-bold">${points} PTS</span>
                    <p class="text-xs text-green-400">Value: $${(points/1000).toFixed(2)}</p>
                </div>
                <input type="text" id="w-addr" placeholder="Binance Pay ID / TRC20" class="w-full bg-slate-950 border border-slate-700 p-3 rounded text-xs mb-3 text-white">
                <button onclick="submitWithdraw()" class="w-full py-3 bg-blue-600 rounded font-bold text-xs uppercase">Submit Request</button>`;
            }
            else if(type === 'recovery') {
                c.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-blue-400">RECOVERY PLANS</h3>
                <div class="grid grid-cols-2 gap-2 mb-4 text-center">
                    <div class="bg-slate-800 p-2 rounded border border-slate-600"><div class="text-[10px] text-slate-400">Fee $20</div><div class="font-bold text-green-400">5% Grow</div></div>
                    <div class="bg-slate-800 p-2 rounded border border-slate-600"><div class="text-[10px] text-slate-400">Fee $50</div><div class="font-bold text-green-400">15% Grow</div></div>
                    <div class="bg-slate-800 p-2 rounded border border-slate-600"><div class="text-[10px] text-slate-400">Fee $100</div><div class="font-bold text-green-400">40% Grow</div></div>
                    <div class="bg-slate-800 p-2 rounded borde

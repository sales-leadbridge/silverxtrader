<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SilverX Elite AI | Pro Terminal</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.emailjs.com/sdk/2.3.2/email.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@700;800&display=swap" rel="stylesheet">

    <style>
        :root { --royal: #2563eb; --orange: #ff6600; --gold: #fbbf24; --green: #22c55e; --red: #ef4444; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #ffffff; color: #0f172a; overflow-x: hidden; }
        
        /* Ad Overlay Custom Timer */
        #ad-overlay { display: none; position: fixed; inset: 0; background: white; z-index: 999999; flex-direction: column; }
        .ad-nav { padding: 15px; display: flex; justify-content: space-between; border-bottom: 1px solid #eee; }
        
        /* Institutional Signal Box */
        .pair-card { background: white; border: 3px solid #f1f5f9; border-radius: 30px; padding: 20px; transition: 0.3s; }
        .card-buy { border-color: var(--green) !important; background: #f0fff4; }
        .card-sell { border-color: var(--red) !important; background: #fff5f5; }
        
        /* Chip & Matrix Animation */
        .ai-chamber { width: 100%; height: 160px; background: #0f172a; border-radius: 20px; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .matrix-scan { position: absolute; inset: 0; opacity: 0.1; background: repeating-linear-gradient(0deg, transparent, transparent 20px, #00d2ff 21px); animation: scan 8s linear infinite; }
        @keyframes scan { from { transform: translateY(-100%); } to { transform: translateY(100%); } }
        
        .neon-ring { width: 100px; height: 100px; border: 4px solid #00d2ff; border-radius: 50%; box-shadow: 0 0 15px #00d2ff; animation: spin 4s linear infinite; display: flex; align-items: center; justify-content: center; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* 3D Buttons */
        .btn-3d { border-bottom: 4px solid rgba(0,0,0,0.2); transition: 0.1s; font-weight: 800; text-transform: uppercase; border-radius: 15px; }
        .btn-3d:active { transform: translateY(2px); border-bottom-width: 1px; }
        
        .sidebar { position: fixed; left: -100%; top: 0; width: 80%; height: 100%; background: white; z-index: 1000000; transition: 0.4s; padding: 30px; }
        .sidebar-active { left: 0; box-shadow: 20px 0 50px rgba(0,0,0,0.1); }
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 2000000; align-items: center; justify-content: center; padding: 20px; }
        .modal-box { background: white; width: 100%; max-width: 400px; border-radius: 30px; padding: 25px; }
    </style>
</head>
<body class="bg-slate-50">

    <div id="ad-overlay">
        <div class="ad-nav">
            <span id="ad-timer" class="bg-blue-100 text-blue-600 px-4 py-1 rounded-full font-bold text-sm">ADS: --s</span>
            <i id="ad-close" class="fas fa-times text-2xl hidden" onclick="closeAd()"></i>
        </div>
        <iframe id="ad-frame" class="w-full h-full border-none"></iframe>
    </div>

    <header class="sticky top-0 z-[50] bg-white border-b p-4 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center border-2 border-amber-400">
                <i id="crown" class="fas fa-crown text-amber-400"></i>
            </div>
            <h1 class="font-black text-lg">SILVERX <span class="text-blue-600">PRO</span></h1>
        </div>
        <div class="flex items-center gap-3">
            <div id="clock" class="text-[11px] font-bold bg-slate-100 px-3 py-1 rounded-lg">00:00:00</div>
            <i class="fas fa-bars-staggered text-xl" onclick="toggleSidebar(true)"></i>
        </div>
    </header>

    <div id="sidebar" class="sidebar">
        <div class="flex justify-between items-center mb-8">
            <h2 class="font-black text-xl">MENU</h2>
            <i class="fas fa-times text-2xl text-slate-300" onclick="toggleSidebar(false)"></i>
        </div>
        <div class="space-y-4">
            <a href="https://wa.me/923064391353" class="flex items-center gap-4 p-4 bg-slate-50 rounded-2xl font-bold"><i class="fab fa-whatsapp text-green-500"></i> Help Center</a>
            <a href="https://www.tiktok.com/@kingtraderofficail" class="flex items-center gap-4 p-4 bg-slate-50 rounded-2xl font-bold"><i class="fab fa-tiktok"></i> TikTok Bot</a>
            <a href="https://www.youtube.com/@kingtraderofficial45" class="flex items-center gap-4 p-4 bg-slate-50 rounded-2xl font-bold"><i class="fab fa-youtube text-red-600"></i> YouTube</a>
            <button onclick="auth.signOut()" class="w-full mt-10 p-4 bg-red-50 text-red-500 rounded-2xl font-black">LOGOUT</button>
        </div>
    </div>

    <main class="p-5">
        <div class="bg-slate-900 rounded-[35px] p-6 text-white mb-6 border-b-8 border-orange-500 shadow-xl">
            <div class="flex justify-between items-start">
                <div>
                    <p class="text-[10px] text-amber-400 font-bold uppercase mb-1">Account Tier: <span id="tier">FREE</span></p>
                    <h3 class="text-4xl font-black"><span id="pts">0</span> <span class="text-sm opacity-50">PTS</span></h3>
                </div>
                <button onclick="handleWithdraw()" class="bg-white text-slate-900 px-4 py-2 rounded-xl text-[10px] font-black uppercase">Withdraw</button>
            </div>
            <p class="mt-4 text-[9px] opacity-60">MINIMUM WITHDRAW: 5000 POINTS = $5 USDT</p>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-6">
            <button onclick="openModal('vip-modal')" class="btn-3d bg-amber-400 p-4 text-sm font-black shadow-lg">VIP Access</button>
            <button onclick="openModal('rec-modal')" class="btn-3d bg-orange-500 text-white p-4 text-sm font-black shadow-lg">Recovery</button>
            <a href="https://broker-qx.pro/sign-up/?lid=1696715" target="_blank" class="btn-3d bg-blue-600 text-white p-4 text-center text-[11px]">Quotex Join</a>
            <a href="https://po-ru4.click/register?utm_campaign=835777&utm_source=affiliate&utm_medium=sr&a=JbsX5mZ1ZchgeZ&ac=pak_users_2026" target="_blank" class="btn-3d bg-slate-800 text-white p-4 text-center text-[11px]">Pocket Join</a>
        </div>

        <div class="flex bg-slate-200 p-1 rounded-2xl mb-6">
            <button id="tab-qx" onclick="switchTab('qx')" class="flex-1 py-3 rounded-xl font-bold text-xs uppercase bg-blue-600 text-white">Quotex Bot</button>
            <button id="tab-po" onclick="switchTab('po')" class="flex-1 py-3 rounded-xl font-bold text-xs uppercase text-slate-500">Pocket Bot</button>
        </div>

        <div id="qx-grid" class="space-y-4"></div>
        <div id="po-grid" class="space-y-4 hidden"></div>
    </main>

    <div id="rec-modal" class="modal-overlay">
        <div class="modal-box">
            <h2 class="font-black text-xl mb-4 italic uppercase">Recovery Plans</h2>
            <div class="space-y-3">
                <button onclick="buyPlan('REC10')" class="w-full p-4 border-2 rounded-2xl flex justify-between font-bold"><span>$10 PLAN</span><span class="text-blue-600">+5% GROW</span></button>
                <button onclick="buyPlan('REC20')" class="w-full p-4 border-2 rounded-2xl flex justify-between font-bold"><span>$20 PLAN</span><span class="text-blue-600">+10% GROW</span></button>
                <button onclick="buyPlan('REC50')" class="w-full p-4 border-2 rounded-2xl flex justify-between font-bold"><span>$50 PLAN</span><span class="text-blue-600">+30% GROW</span></button>
                <button onclick="buyPlan('REC100')" class="w-full p-4 border-2 rounded-2xl flex justify-between font-bold"><span>$100 PLAN</span><span class="text-blue-600">+70% GROW</span></button>
            </div>
            <button onclick="closeModals()" class="w-full mt-4 text-slate-400 font-bold text-xs">CLOSE</button>
        </div>
    </div>

    <div id="vip-modal" class="modal-overlay">
        <div class="modal-box text-center">
            <i class="fas fa-gem text-4xl text-blue-500 mb-4"></i>
            <h2 class="font-black text-xl mb-2 uppercase">VIP AI ACCESS</h2>
            <p class="text-sm text-slate-500 mb-6">100% Accuracy, No Ads, Instant Signals for 1 Month.</p>
            <div class="bg-slate-50 p-4 rounded-2xl mb-6 text-left text-[11px] font-bold">
                <p>Binance Pay ID: 403009858</p>
                <p class="mt-2">Price: $100 USDT</p>
            </div>
            <button onclick="buyPlan('VIP100')" class="w-full py-4 bg-blue-600 text-white rounded-2xl font-black">GET VIP NOW</button>
            <button onclick="closeModals()" class="w-full mt-4 text-slate-400 font-bold text-xs">CLOSE</button>
        </div>
    </div>

    <script>
        // --- CONFIG ---
        const firebaseConfig = { apiKey: "AIzaSyAyXzJ1UUdtWe96NjiQbVCqnWdIv8XakhA", authDomain: "silverxtrader.firebaseapp.com", projectId: "silverxtrader", storageBucket: "silverxtrader.firebasestorage.app", messagingSenderId: "46330013690", appId: "1:46330013690:web:c2aad241ad7abd49e0e643" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(); const auth = firebase.auth();
        emailjs.init("zqFa81v7RThJXvikM");

        const ads = [
            "https://www.effectivegatecpm.com/zu9fwwufi?key=5c01f6e26f4b9943913f0d36bfa48f6d",
            "https://www.effectivegatecpm.com/m3re02atee?key=cebdb997452acac01a6d39d48dcb0e68",
            "https://www.effectivegatecpm.com/njujpaga3n?key=2636c1fb3975328fd5e16e532dda0482",
            "https://www.effectivegatecpm.com/u03w5rk4?key=d5c708947384bde96b27f42a724b41d9",
            "https://www.effectivegatecpm.com/szh2badub?key=8aef9f0adbfa95686459aaeeea7db26a",
            "https://www.effectivegatecpm.com/wzb0ven1?key=87866ac53935e941e61c53d03338eb0a",
            "https://www.effectivegatecpm.com/d29maviwb?key=f03e146f78029f3a63200d7d63db6e42",
            "https://www.effectivegatecpm.com/p85rfz3v8?key=b50205713bdb8a8e9b85dc14013c31f7"
        ];

        const pairs = ["EUR/USD","GBP/USD","USD/JPY","AUD/USD","USD/CAD","EUR/GBP","NZD/USD","USD/CHF","EUR/JPY","GBP/JPY","BTC/USD","ETH/USD","SOL/USD","XRP/USD","LTC/USD","DOGE/USD"];

        let userStatus = "Free"; let userPoints = 0; let activePairId = null;

        // --- AUTH & DATA ---
        auth.onAuthStateChanged(user => {
            if(!user) { /* Redirect logic here */ }
            else {
                db.collection("users").doc(user.uid).onSnapshot(doc => {
                    if(doc.exists) {
                        const d = doc.data();
                        userStatus = d.status || "Free";
                        userPoints = d.points || 0;
                        document.getElementById('pts').innerText = userPoints;
                        document.getElementById('tier').innerText = userStatus;
                        if(userStatus === "VIP") document.getElementById('crown').classList.add('fa-beat');
                    }
                });
            }
        });

        // --- UI RENDER ---
        function renderPairs(broker) {
            const container = document.getElementById(`${broker}-grid`);
            pairs.forEach((p, i) => {
                const card = document.createElement('div');
                card.className = 'pair-card'; card.id = `${broker}-card-${i}`;
                card.innerHTML = `
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="font-black text-slate-700">${p} <span class="text-[9px] bg-slate-100 px-2 py-0.5 rounded">OTC</span></h4>
                        <span class="text-[10px] text-blue-600 font-bold">Accuracy: 96%</span>
                    </div>
                    <div class="ai-chamber">
                        <div class="matrix-scan"></div>
                        <div class="neon-ring"><i class="fas fa-microchip text-2xl text-white"></i></div>
                    </div>
                    <button id="${broker}-btn-${i}" onclick="getSignal('${broker}', ${i})" class="btn-3d w-full mt-4 bg-blue-600 text-white py-4 text-xs font-black">Get Signal</button>
                `;
                container.appendChild(card);
            });
        }
        renderPairs('qx'); renderPairs('po');

        // --- SIGNAL LOGIC ---
        function getSignal(broker, index) {
            activePairId = `${broker}-card-${index}`;
            const btn = document.getElementById(`${broker}-btn-${index}`);
            
            if(userStatus === "VIP") {
                processSignal(activePairId, btn);
            } else {
                startAd(activePairId, btn);
            }
        }

        function startAd(cardId, btn) {
            const overlay = document.getElementById('ad-overlay');
            const frame = document.getElementById('ad-frame');
            const timerTxt = document.getElementById('ad-timer');
            const closeIcon = document.getElementById('ad-close');

            frame.src = ads[Math.floor(Math.random() * ads.length)];
            overlay.style.display = 'flex';
            closeIcon.classList.add('hidden');

            let time = Math.floor(Math.random() * (30 - 10 + 1)) + 10; // 10s to 30s rotation
            const int = setInterval(() => {
                time--;
                timerTxt.innerText = `ADS: ${time}s`;
                if(time <= 0) {
                    clearInterval(int);
                    closeIcon.classList.remove('hidden');
                }
            }, 1000);
        }

        function closeAd() {
            document.getElementById('ad-overlay').style.display = 'none';
            const btn = document.querySelector(`#${activePairId} button`);
            processSignal(activePairId, btn);
        }

        function processSignal(cardId, btn) {
            btn.disabled = true;
            btn.innerText = "ANALYSING...";
            
            setTimeout(() => {
                const card = document.getElementById(cardId);
                const isBuy = Math.random() > 0.5;
                
                // Point Add securely
                db.collection("users").doc(auth.currentUser.uid).update({
                    points: firebase.firestore.FieldValue.increment(1)
                });

                card.classList.add(isBuy ? 'card-buy' : 'card-sell');
                btn.innerText = isBuy ? "1 MIN BUY ↑" : "1 MIN SELL ↓";
                btn.className = `btn-3d w-full mt-4 ${isBuy ? 'bg-green-500' : 'bg-red-500'} text-white py-4 font-black animate-pulse`;

                // Cooldown Timer
                let cd = 60;
                const int = setInterval(() => {
                    cd--;
                    btn.innerText = `WAIT ${cd}s`;
                    if(cd <= 0) {
                        clearInterval(int);
                        btn.disabled = false;
                        btn.innerText = "Get Signal";
                        btn.className = "btn-3d w-full mt-4 bg-blue-600 text-white py-4 text-xs font-black";
                        card.classList.remove('card-buy', 'card-sell');
                    }
                }, 1000);
            }, 3000);
        }

        // --- HELPERS ---
        function switchTab(t) {
            document.getElementById('qx-grid').classList.toggle('hidden', t === 'po');
            document.getElementById('po-grid').classList.toggle('hidden', t === 'qx');
            document.getElementById('tab-qx').className = t === 'qx' ? 'flex-1 py-3 rounded-xl font-bold text-xs uppercase bg-blue-600 text-white' : 'flex-1 py-3 rounded-xl font-bold text-xs uppercase text-slate-500';
            document.getElementById('tab-po').className = t === 'po' ? 'flex-1 py-3 rounded-xl font-bold text-xs uppercase bg-blue-600 text-white' : 'flex-1 py-3 rounded-xl font-bold text-xs uppercase text-slate-500';
        }

        function handleWithdraw() {
            if(userPoints < 5000) {
                alert("Minimum 5000 points required for withdrawal!");
            } else {
                const addr = prompt("Enter USDT TRC20 Address:");
                if(addr) {
                    emailjs.send("service_cps9vge", "template_z0z0grc", {
                        user_email: auth.currentUser.email,
                        points: userPoints,
                        address: addr,
                        type: "WITHDRAWAL"
                    }).then(() => alert("Request Sent! Verification takes 1-12 hours."));
                }
            }
        }

        function toggleSidebar(s) { document.getElementById('sidebar').classList.toggle('sidebar-active', s); }
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }
        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
    </script>
</body>
</html>

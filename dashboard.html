<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SilverX Terminal | Elite</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
        /* --- FUTURISTIC UI --- */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Rajdhani:wght@400;600;700;800&display=swap');
        
        body { background: #0b1121; color: white; font-family: 'Rajdhani', sans-serif; overflow-x: hidden; }
        .font-tech { font-family: 'Orbitron', sans-serif; }
        
        /* HENDECAGON (11-Sided Ring) */
        .hendecagon-container { position: relative; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto; }
        
        /* The 11-sided Shape */
        .hendecagon-shape {
            position: absolute; width: 100%; height: 100%;
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid #3b82f6;
            clip-path: polygon(50% 0%, 78% 5%, 98% 25%, 100% 55%, 85% 80%, 55% 100%, 25% 95%, 5% 75%, 0% 45%, 15% 15%, 40% 2%);
            z-index: 10;
            transition: all 0.3s ease;
        }

        /* Rotating Dashed Ring */
        .tech-ring {
            position: absolute; width: 120%; height: 120%;
            border: 1px dashed rgba(59, 130, 246, 0.4);
            border-radius: 50%;
            animation: spin-slow 10s linear infinite;
            z-index: 5;
        }
        @keyframes spin-slow { 100% { transform: rotate(360deg); } }

        /* Music Visualizer Waves */
        .wave-bar {
            position: absolute; width: 3px; background: #3b82f6; border-radius: 2px;
            animation: equalizer 1s ease-in-out infinite;
        }
        .wb-1 { height: 15px; left: -10px; top: 50%; animation-delay: 0s; }
        .wb-2 { height: 20px; right: -10px; top: 50%; animation-delay: 0.2s; }
        .wb-3 { height: 15px; top: -10px; left: 50%; transform: rotate(90deg); animation-delay: 0.4s; }
        .wb-4 { height: 20px; bottom: -10px; left: 50%; transform: rotate(90deg); animation-delay: 0.1s; }
        
        @keyframes equalizer { 0%, 100% { transform: scaleY(1); opacity: 0.5; } 50% { transform: scaleY(2); opacity: 1; } }

        /* STATES (Buy/Sell) */
        .state-buy .hendecagon-shape { border-color: #22c55e; background: rgba(34, 197, 94, 0.1); box-shadow: 0 0 15px rgba(34,197,94,0.3); }
        .state-buy .wave-bar { background: #22c55e; }
        .state-buy .tech-ring { border-color: #22c55e; }
        .state-buy .chip-icon { color: #22c55e !important; }

        .state-sell .hendecagon-shape { border-color: #ef4444; background: rgba(239, 68, 68, 0.1); box-shadow: 0 0 15px rgba(239,68,68,0.3); }
        .state-sell .wave-bar { background: #ef4444; }
        .state-sell .tech-ring { border-color: #ef4444; }
        .state-sell .chip-icon { color: #ef4444 !important; }

        /* VIP GOLD THEME */
        .vip-active { background: #000000; background-image: radial-gradient(rgba(251, 191, 36, 0.1) 1px, transparent 1px); background-size: 20px 20px; }
        .vip-active .text-blue-500 { color: #fbbf24 !important; }
        .vip-active .bg-blue-600 { background-color: #fbbf24 !important; color: black !important; }
        .vip-active .border-blue-500 { border-color: #fbbf24 !important; }
        .vip-active .hendecagon-shape { border-color: #fbbf24 !important; background: rgba(251, 191, 36, 0.05); }
        .vip-active .wave-bar { background: #fbbf24 !important; }

        /* GLASS & MODALS */
        .glass-panel { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 16px; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 9999; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-box { width: 90%; max-width: 400px; max-height: 85vh; overflow-y: auto; background: #0f172a; border: 1px solid #334155; border-radius: 20px; padding: 20px; position: relative; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

    </style>
</head>
<body id="app-root">

    <div id="sidebar" class="fixed inset-y-0 left-[-100%] w-[85%] bg-[#020617] border-r border-slate-800 z-[5000] transition-all duration-300 p-6 shadow-[10px_0_50px_rgba(0,0,0,0.8)]">
        <div class="flex justify-between items-center mb-10 border-b border-slate-800 pb-4">
            <h2 class="text-2xl font-tech font-black uppercase tracking-widest text-white">SilverX <span class="text-blue-500">Menu</span></h2>
            <button onclick="toggleMenu()" class="text-slate-500 hover:text-white transition"><i class="fas fa-times text-2xl"></i></button>
        </div>
        <div class="space-y-4">
            <a href="https://wa.me/923064391353" class="flex items-center p-4 bg-slate-900 rounded-xl border border-slate-800 hover:border-green-500 transition-colors">
                <div class="w-10 h-10 rounded-full bg-green-900/30 flex items-center justify-center mr-4"><i class="fab fa-whatsapp text-green-500 text-xl"></i></div>
                <span class="font-bold text-sm">WhatsApp Help</span>
            </a>
            <a href="https://www.youtube.com/@kingtraderofficial45" class="flex items-center p-4 bg-slate-900 rounded-xl border border-slate-800 hover:border-red-500 transition-colors">
                <div class="w-10 h-10 rounded-full bg-red-900/30 flex items-center justify-center mr-4"><i class="fab fa-youtube text-red-500 text-xl"></i></div>
                <span class="font-bold text-sm">YouTube Training</span>
            </a>
            <a href="#" class="flex items-center p-4 bg-slate-900 rounded-xl border border-slate-800 hover:border-pink-500 transition-colors">
                <div class="w-10 h-10 rounded-full bg-pink-900/30 flex items-center justify-center mr-4"><i class="fab fa-tiktok text-pink-500 text-xl"></i></div>
                <span class="font-bold text-sm">TikTok Analysis</span>
            </a>
            <button onclick="showModal('policy')" class="w-full flex items-center p-4 bg-slate-900 rounded-xl border border-slate-800 hover:border-blue-500 transition-colors text-left">
                <div class="w-10 h-10 rounded-full bg-blue-900/30 flex items-center justify-center mr-4"><i class="fas fa-file-shield text-blue-500 text-xl"></i></div>
                <span class="font-bold text-sm">Privacy Policy</span>
            </button>
            <button onclick="auth.signOut()" class="w-full flex items-center p-4 bg-red-950/30 rounded-xl border border-red-900/50 hover:bg-red-900/50 transition-colors text-left mt-8">
                <i class="fas fa-power-off text-red-500 mr-4 ml-3"></i>
                <span class="font-bold text-sm text-red-400">Logout Securely</span>
            </button>
        </div>
    </div>

    <header class="sticky top-0 z-40 bg-[#0b1121]/90 backdrop-blur-md border-b border-slate-800 px-5 py-3 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <button onclick="toggleMenu()" class="text-white hover:text-blue-500 transition"><i class="fas fa-bars-staggered text-xl"></i></button>
            <div>
                <h1 class="font-tech font-black text-lg uppercase tracking-tight">SilverX <span class="text-blue-500" id="header-brand">AI</span></h1>
                <p id="live-time" class="text-[10px] text-slate-400 font-mono tracking-widest">00:00:00 UTC</p>
            </div>
        </div>
        <div id="status-pill" class="px-4 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-[10px] font-black uppercase tracking-widest text-slate-300 shadow-inner">
            LOADING...
        </div>
    </header>

    <main class="p-5 pb-32">
        
        <div id="points-card" class="glass-panel p-6 mb-6 relative overflow-hidden shadow-[0_0_30px_rgba(59,130,246,0.15)] group">
            <div class="absolute -right-10 -top-10 w-32 h-32 bg-blue-500/20 rounded-full blur-3xl group-hover:bg-blue-500/30 transition"></div>
            
            <div class="relative z-10 flex justify-between items-end">
                <div>
                    <p class="text-[10px] text-blue-400 font-bold uppercase tracking-wider mb-1">Total Balance</p>
                    <h2 class="text-4xl font-black text-white tracking-tighter"><span id="pts-display">0</span> <span class="text-sm font-normal text-slate-400">PTS</span></h2>
                </div>
                <button onclick="showModal('withdraw')" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-xl text-xs font-black uppercase shadow-lg shadow-blue-900/50 transition-transform active:scale-95">
                    Withdraw <i class="fas fa-arrow-right ml-1"></i>
                </button>
            </div>
            
            <div class="mt-4 pt-4 border-t border-white/10 flex justify-between items-center text-[10px] font-bold uppercase text-slate-400">
                <span><i class="fas fa-coins text-yellow-500 mr-1"></i> Rate: 5000 = $5 USD</span>
                <span class="flex items-center text-green-400"><span class="w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"></span> Live</span>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-6">
            <button onclick="showModal('vip')" class="glass-panel p-5 text-center border-amber-500/30 hover:border-amber-500 transition-all group">
                <div class="w-12 h-12 rounded-full bg-amber-500/10 mx-auto mb-3 flex items-center justify-center group-hover:scale-110 transition-transform border border-amber-500/20">
                    <i class="fas fa-crown text-amber-500 text-xl"></i>
                </div>
                <h3 class="font-black text-sm uppercase text-amber-500">Upgrade VIP</h3>
                <p class="text-[9px] text-slate-400 mt-1">NO ADS &bull; 98% ACC</p>
            </button>

            <button onclick="showModal('recovery')" class="glass-panel p-5 text-center border-blue-500/30 hover:border-blue-500 transition-all group">
                <div class="w-12 h-12 rounded-full bg-blue-500/10 mx-auto mb-3 flex items-center justify-center group-hover:scale-110 transition-transform border border-blue-500/20">
                    <i class="fas fa-chart-line text-blue-500 text-xl"></i>
                </div>
                <h3 class="font-black text-sm uppercase text-blue-400">Recovery</h3>
                <p class="text-[9px] text-slate-400 mt-1">GROWTH PLANS</p>
            </button>
        </div>

        <div class="glass-panel p-1 mb-6 flex gap-1">
            <a href="https://broker-qx.pro/sign-up/?lid=1696715" target="_blank" class="flex-1 py-3 bg-gradient-to-r from-green-700 to-green-600 rounded-lg text-center font-bold text-[10px] uppercase shadow-inner hover:brightness-110">Open Quotex</a>
            <a href="https://po-ru4.click/register?utm_campaign=835777&utm_source=affiliate&utm_medium=sr&a=JbsX5mZ1ZchgeZ&ac=pak_users_2026" target="_blank" class="flex-1 py-3 bg-gradient-to-r from-blue-700 to-blue-600 rounded-lg text-center font-bold text-[10px] uppercase shadow-inner hover:brightness-110">Open Pocket</a>
        </div>
        
        <div class="flex mb-6 bg-slate-900 p-1 rounded-xl">
            <button id="tab-qx" onclick="setBroker('qx')" class="flex-1 py-2 rounded-lg text-[10px] font-bold uppercase transition-all bg-slate-800 text-white shadow">Quotex Pair</button>
            <button id="tab-po" onclick="setBroker('po')" class="flex-1 py-2 rounded-lg text-[10px] font-bold uppercase transition-all text-slate-500 hover:text-white">Pocket Option</button>
        </div>

        <div id="signals-area" class="grid grid-cols-2 gap-4">
            </div>

    </main>

    <div id="modal-container" class="modal-overlay">
        <div class="modal-box">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-500 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            <div id="modal-body-content"></div>
        </div>
    </div>

    <div id="ad-screen" class="fixed inset-0 bg-white z-[9999] hidden flex-col">
        <div class="h-12 bg-slate-100 flex justify-between items-center px-4 shadow-md z-10">
            <span class="font-black text-red-600 text-xs tracking-widest" id="ad-counter">ADVERTISEMENT: 15s</span>
            <button id="ad-skip-btn" class="hidden font-bold text-slate-900 text-xs border border-slate-900 px-3 py-1 rounded hover:bg-slate-900 hover:text-white transition" onclick="completeAd()">SKIP AD <i class="fas fa-forward ml-1"></i></button>
        </div>
        <iframe id="ad-frame" class="flex-1 w-full border-none bg-gray-50"></iframe>
    </div>

    <script>
        // --- CONFIGURATION ---
        const firebaseConfig = { apiKey: "AIzaSyAyXzJ1UUdtWe96NjiQbVCqnWdIv8XakhA", authDomain: "silverxtrader.firebaseapp.com", projectId: "silverxtrader", storageBucket: "silverxtrader.firebasestorage.app", messagingSenderId: "46330013690", appId: "1:46330013690:web:c2aad241ad7abd49e0e643" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // --- GLOBAL STATE ---
        let userData = { points: 0, status: 'Free' };
        let cooldownActive = false;
        
        // Pairs Lists
        const pairsFree = ["EUR/USD", "GBP/USD", "USD/JPY", "BTC/USD", "ETH/USD", "AUD/CAD", "NZD/USD", "USD/CHF", "EUR/JPY", "GBP/JPY", "XAU/USD", "USDT/USD", "BNB/USD", "XRP/USD", "ADA/USD", "DOGE/USD"];
        const pairsVIP = [...pairsFree, "SOL/USD", "LTC/USD", "EUR/GBP", "AUD/JPY", "CAD/JPY", "USD/MXN", "USD/BRL", "OTC/GEM"];

        const adUrls = ["https://www.effectivegatecpm.com/zu9fwwufi?key=5c01f6e26f4b9943913f0d36bfa48f6d", "https://www.effectivegatecpm.com/m3re02atee?key=cebdb997452acac01a6d39d48dcb0e68"];

        // --- INIT ---
        auth.onAuthStateChanged(user => {
            if(!user) window.location.href = 'index.html';
            // Realtime Listener
            db.collection('users').doc(user.uid).onSnapshot(doc => {
                if(doc.exists) {
                    userData = doc.data();
                    updateInterface();
                }
            });
        });

        // --- UI UPDATER ---
        function updateInterface() {
            // Update Points
            document.getElementById('pts-display').innerText = userData.points || 0;
            
            // Update Status Pill
            const pill = document.getElementById('status-pill');
            pill.innerText = userData.status || "FREE";
            
            // VIP Theme Toggle
            const body = document.getElementById('app-root');
            const pointsCard = document.getElementById('points-card');
            
            if(userData.status === 'VIP') {
                body.classList.add('vip-active');
                pointsCard.style.display = 'none'; // Hide points for VIP
                pill.className = "px-4 py-1.5 bg-amber-500 text-black border border-amber-400 rounded-full text-[10px] font-black uppercase tracking-widest shadow-[0_0_15px_#fbbf24]";
                document.getElementById('header-brand').classList.replace('text-blue-500', 'text-amber-500');
                renderGrid(pairsVIP);
            } else {
                body.classList.remove('vip-active');
                pointsCard.style.display = 'block';
                pill.className = "px-4 py-1.5 bg-slate-800 border border-slate-700 rounded-full text-[10px] font-black uppercase tracking-widest text-slate-300 shadow-inner";
                renderGrid(pairsFree);
            }
        }

        // --- GRID RENDERER (HENDECAGON) ---
        function renderGrid(list) {
            const grid = document.getElementById('signals-area');
            grid.innerHTML = '';
            list.forEach((pair, index) => {
                const uid = `sig-${index}`;
                grid.innerHTML += `
                <div id="${uid}" class="glass-panel p-4 relative overflow-hidden transition-all duration-300">
                    
                    <div class="flex justify-between items-center mb-4 border-b border-white/5 pb-2">
                        <span class="text-[10px] font-bold text-slate-300 tracking-wider">${pair}</span>
                        <span class="text-[9px] text-green-500 font-bold bg-green-900/20 px-1 rounded">9${Math.floor(Math.random()*9)}%</span>
                    </div>
                    
                    <div class="hendecagon-container mb-4">
                        <div class="tech-ring"></div>
                        <div class="hendecagon-shape"></div>
                        
                        <i class="fas fa-microchip text-2xl text-blue-500 relative z-20 chip-icon"></i>
                        
                        <div class="wave-bar wb-1"></div>
                        <div class="wave-bar wb-2"></div>
                        <div class="wave-bar wb-3"></div>
                        <div class="wave-bar wb-4"></div>
                    </div>
                    
                    <div class="absolute bottom-2 right-2 text-4xl opacity-10 grayscale hover:grayscale-0 transition pointer-events-none">üïØÔ∏è</div>

                    <button id="btn-${uid}" onclick="triggerSignal('${uid}')" class="w-full py-3 bg-[#0f172a] border border-slate-700 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-800 transition relative z-30">
                        GET SIGNAL
                    </button>
                </div>`;
            });
        }

        // --- SIGNAL LOGIC CORE ---
        function triggerSignal(id) {
            const btn = document.getElementById(`btn-${id}`);
            
            // FREE LOGIC
            if(userData.status !== 'VIP') {
                if(cooldownActive) { alert("Please wait 60s between signals."); return; }
                
                // 1. Launch Ad
                launchAdSequence(() => {
                    // 2. Loading State (5s)
                    btn.innerText = "ANALYZING...";
                    btn.classList.add("animate-pulse", "text-blue-400");
                    
                    setTimeout(() => {
                        displayResult(id);
                        cooldownActive = true;
                        // 3. Cooldown Lock (60s)
                        setTimeout(() => { cooldownActive = false; }, 60000);
                    }, 5000);
                });
            } 
            // VIP LOGIC
            else {
                // Instant Execution (3s simulate)
                btn.innerText = "INSTITUTIONAL SCAN...";
                setTimeout(() => { displayResult(id); }, 2000);
            }
        }

        function displayResult(id) {
            const box = document.getElementById(id);
            const btn = document.getElementById(`btn-${id}`);
            const direction = Math.random() > 0.5 ? 'BUY' : 'SELL';
            
            if(direction === 'BUY') {
                box.classList.add('state-buy');
                btn.className = "w-full py-3 bg-green-600 text-white rounded-xl text-[10px] font-black uppercase shadow-[0_0_20px_#22c55e]";
                btn.innerHTML = `CALL / UP <i class="fas fa-arrow-trend-up ml-1"></i>`;
            } else {
                box.classList.add('

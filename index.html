<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SilverX Pro | Institutional Access</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root { --neon-blue: #00f3ff; --neon-red: #ff003c; --dark-bg: #050505; --panel-bg: rgba(10, 10, 10, 0.85); }
        body { background-color: var(--dark-bg); color: white; font-family: 'Rajdhani', sans-serif; overflow: hidden; height: 100vh; margin: 0; display: flex; align-items: center; justify-content: center; }
        
        #matrix-canvas { position: absolute; top: 0; left: 0; z-index: 0; opacity: 0.15; }
        
        .cyber-panel { position: relative; z-index: 10; width: 100%; max-width: 450px; padding: 40px; background: var(--panel-bg); border: 1px solid #333; box-shadow: 0 0 30px rgba(0, 243, 255, 0.1); backdrop-filter: blur(10px); border-radius: 4px; clip-path: polygon(0 0, 100% 0, 100% 85%, 95% 100%, 0 100%); }
        .cyber-panel::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, var(--neon-blue), transparent); animation: scanline 3s infinite linear; }
        
        .cyber-input-group { position: relative; margin-bottom: 25px; }
        .cyber-input { width: 100%; background: rgba(0, 0, 0, 0.5); border: 1px solid #333; color: var(--neon-blue); padding: 15px 15px 15px 45px; font-family: 'Source Code Pro', monospace; font-size: 14px; transition: 0.3s; outline: none; }
        .cyber-input:focus { border-color: var(--neon-blue); box-shadow: 0 0 15px rgba(0, 243, 255, 0.2); }
        .cyber-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #555; transition: 0.3s; }
        .cyber-input:focus + .cyber-icon { color: var(--neon-blue); }
        
        .cyber-btn { width: 100%; padding: 15px; background: var(--neon-blue); color: black; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; border: none; cursor: pointer; position: relative; overflow: hidden; transition: 0.3s; clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px); }
        .cyber-btn:hover { background: white; box-shadow: 0 0 20px var(--neon-blue); }
        .google-btn { margin-top: 15px; background: transparent; border: 1px solid #333; color: white; }
        .google-btn:hover { background: rgba(255,255,255,0.05); }
        
        .server-status { margin-top: 30px; border-top: 1px solid #333; padding-top: 20px; display: flex; justify-content: space-between; font-size: 10px; color: #555; font-family: 'Source Code Pro', monospace; }
        .status-dot { width: 8px; height: 8px; background: #333; border-radius: 50%; display: inline-block; margin-right: 5px; }
        .status-dot.active { background: #00ff41; box-shadow: 0 0 5px #00ff41; }
        
        @keyframes scanline { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .glitch-text { animation: glitch 3s infinite; }
        @keyframes glitch { 0% { text-shadow: 0 0 0 transparent; } 2% { text-shadow: 2px 0 var(--neon-red), -2px 0 var(--neon-blue); } 4% { text-shadow: 0 0 0 transparent; } }
        
        #terminal-log { position: fixed; bottom: 20px; left: 20px; font-family: 'Source Code Pro', monospace; font-size: 10px; color: #00ff41; opacity: 0.7; pointer-events: none; }
    </style>
</head>
<body>
    <canvas id="matrix-canvas"></canvas>
    <div id="terminal-log"><div class="log-line">> SYSTEM_BOOT_SEQUENCE_INITIATED...</div></div>

    <div class="cyber-panel">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold glitch-text mb-2">SILVERX <span class="text-cyan-400">PRO</span></h1>
            <p class="text-xs text-slate-500 uppercase tracking-[0.3em]">Institutional Access Terminal</p>
        </div>

        <div id="error-box" class="hidden mb-4 p-3 bg-red-900/20 border border-red-500/50 text-red-400 text-xs font-mono">
            <i class="fas fa-exclamation-triangle mr-2"></i> <span id="error-msg">Error</span>
        </div>

        <form onsubmit="event.preventDefault(); authManager.login();">
            <div class="cyber-input-group">
                <input type="email" id="email" class="cyber-input" placeholder="ACCESS_ID (EMAIL)" required>
                <i class="fas fa-fingerprint cyber-icon"></i>
            </div>
            <div class="cyber-input-group">
                <input type="password" id="password" class="cyber-input" placeholder="SECURITY_KEY" required>
                <i class="fas fa-key cyber-icon"></i>
            </div>
            <button type="submit" id="login-btn" class="cyber-btn">
                <span id="btn-text">INITIALIZE SESSION</span>
                <i class="fas fa-circle-notch fa-spin hidden" id="btn-loader"></i>
            </button>
        </form>

        <button onclick="authManager.googleLogin()" class="cyber-btn google-btn"><i class="fab fa-google mr-2"></i> GOOGLE AUTH</button>

        <div class="server-status">
            <div><span class="status-dot active"></span> DATABASE: CONNECTED</div>
            <div>LATENCY: <span id="latency-display">12ms</span></div>
        </div>
        <div class="mt-4 text-[9px] text-center text-slate-600 font-mono">SECURE SERVER CONNECTION v5.2.1-alpha</div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyAyXzJ1UUdtWe96NjiQbVCqnWdIv8XakhA", authDomain: "silverxtrader.firebaseapp.com", projectId: "silverxtrader", storageBucket: "silverxtrader.firebasestorage.app", messagingSenderId: "46330013690", appId: "1:46330013690:web:c2aad241ad7abd49e0e643" };

        class MatrixEffect {
            constructor(canvasId) {
                this.canvas = document.getElementById(canvasId); this.ctx = this.canvas.getContext('2d'); this.resize();
                this.characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*'; this.fontSize = 14; this.columns = this.canvas.width / this.fontSize;
                this.drops = []; this.initDrops(); window.addEventListener('resize', () => this.resize()); this.animate();
            }
            resize() { this.canvas.width = window.innerWidth; this.canvas.height = window.innerHeight; this.columns = this.canvas.width / 14; this.initDrops(); }
            initDrops() { this.drops = []; for (let i = 0; i < this.columns; i++) this.drops[i] = 1; }
            animate() {
                this.ctx.fillStyle = 'rgba(5, 5, 5, 0.05)'; this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.fillStyle = '#00f3ff'; this.ctx.font = this.fontSize + 'px monospace';
                for (let i = 0; i < this.drops.length; i++) {
                    const text = this.characters.charAt(Math.floor(Math.random() * this.characters.length));
                    this.ctx.fillText(text, i * this.fontSize, this.drops[i] * this.fontSize);
                    if (this.drops[i] * this.fontSize > this.canvas.height && Math.random() > 0.975) this.drops[i] = 0;
                    this.drops[i]++;
                }
                requestAnimationFrame(() => this.animate());
            }
        }

        class AuthManager {
            constructor() { firebase.initializeApp(firebaseConfig); this.auth = firebase.auth(); this.db = firebase.firestore(); this.initListener(); }
            initListener() {
                this.auth.onAuthStateChanged(user => {
                    if (user) { logger.add("> USER_DETECTED: " + user.uid); this.verifyProfile(user); } 
                    else { logger.add("> NO_ACTIVE_SESSION"); }
                });
            }
            async verifyProfile(user) {
                const userRef = this.db.collection('users').doc(user.uid);
                try {
                    const doc = await userRef.get();
                    if (!doc.exists) {
                        logger.add("> CREATING_DB_ENTRY");
                        await userRef.set({ email: user.email, uid: user.uid, points: 0, status: "Free", createdAt: firebase.firestore.FieldValue.serverTimestamp(), lastLogin: firebase.firestore.FieldValue.serverTimestamp() });
                    }
                    setTimeout(() => window.location.href = "dashboard.html", 1000);
                } catch (error) { ui.showError("DB_CONNECTION_FAILURE"); }
            }
            login() {
                const email = document.getElementById('email').value; const pass = document.getElementById('password').value;
                if (!email || !pass) return ui.showError("MISSING_CREDENTIALS");
                ui.setLoading(true);
                this.auth.signInWithEmailAndPassword(email, pass).catch(err => {
                    if (err.code === 'auth/user-not-found') this.auth.createUserWithEmailAndPassword(email, pass);
                    else { ui.setLoading(false); ui.showError(err.message); }
                });
            }
            googleLogin() { this.auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()).catch(err => ui.showError(err.message)); }
        }

        class UIManager {
            constructor() { this.btnText = document.getElementById('btn-text'); this.loader = document.getElementById('btn-loader'); this.errorBox = document.getElementById('error-box'); this.errorMsg = document.getElementById('error-msg'); }
            setLoading(l) { this.btnText.classList.toggle('hidden', l); this.loader.classList.toggle('hidden', !l); }
            showError(m) { this.errorMsg.innerText = m; this.errorBox.classList.remove('hidden'); setTimeout(() => this.errorBox.classList.add('hidden'), 5000); }
        }
        class TerminalLogger {
            constructor() { this.c = document.getElementById('terminal-log'); }
            add(t) { const d = document.createElement('div'); d.className = 'log-line'; d.innerText = `${new Date().toLocaleTimeString()} ${t}`; this.c.appendChild(d); if(this.c.children.length>5) this.c.removeChild(this.c.firstChild); }
        }

        const matrix = new MatrixEffect('matrix-canvas');
        const ui = new UIManager();
        const logger = new TerminalLogger();
        const authManager = new AuthManager();
        setInterval(() => document.getElementById('latency-display').innerText = (Math.floor(Math.random() * 50) + 10) + "ms", 2000);
    </script>
</body>
</html>
